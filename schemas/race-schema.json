{
    "name": "race",
    "fields": [
      {
        "name": "code",
        "csvName": "code",
        "type": "native",
        "datatype": "string",
        "mandatory": false
      },
      {
        "name": "image",
        "csvName": "image",
        "type": "native",
        "datatype": "string",
        "mandatory": false
      },
      {
        "name": "description",
        "csvName": "description",
        "type": "native",
        "datatype": "string",
        "mandatory": false
      },
      {
        "name": "banner",
        "csvName": "banner",
        "type": "native",
        "datatype": "string",
        "mandatory": false
      },
      {
        "name": "name",
        "csvName": "name",
        "type": "native",
        "datatype": "string",
        "mandatory": true
      },
      {
        "name": "date",
        "csvName": "date",
        "type": "native",
        "datatype": "date",
        "mandatory": true
      },
      {
        "name": "numberOfRunners",
        "csvName": "numberOfRunners",
        "type": "native",
        "datatype": "number",
        "mandatory": false
      },
      {
        "name": "altitude",
        "csvName": "altitude",
        "type": "native",
        "datatype": "string",
        "mandatory": true
      },
      {
        "name": "temperature",
        "csvName": "temperature",
        "type": "native",
        "datatype": "string",
        "mandatory": true
      },
      {
        "name": "socialNetworks",
        "csvName": "socialNetworks",
        "type": "custom",
        "parser": "parseSocialNetworks",
        "regex": "^(?:(?:ig|web|fb)@[^|]+\\|?)+$"
      },            
      {
        "name": "location",
        "csvName": "location",
        "type": "custom",
        "parser": "parseLocation",
        "regex": "^country:[^|]+\\|department:[^|]+\\|city:[^|]+$",
        "mandatory": true
      },
      {
        "name": "promotional",
        "csvName": "promotional",
        "type": "custom",
        "regex": "^(Yes|No)(\\|\\d+)?$",
        "parser": "parsePromotional"
      },
      {
        "name": "registrationStatus",
        "csvName": "registrationOpen",
        "type": "custom",
        "regex": "^(Yes|No)$",
        "parser": "parseYesNoField"
      },      
      {
        "name": "distances",
        "type": "aggregate",
        "schema": "race-distance",        
        "aggregateKey": {
          "main": "code",
          "foreign": "raceCode"
        }
      }
    ]
  }
  